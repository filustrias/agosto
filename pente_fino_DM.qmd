# Pente Fino Diabetes {.unnumbered}

## DOCUMENTA√á√ÉO DAS VARI√ÅVEIS - AN√ÅLISE DE DIABETES MELLITUS


## **SE√á√ÉO 1: IDENTIFICA√á√ÉO E CONSULTA**

### `cpf`
- **Tipo:** String (11 d√≠gitos)
- **Descri√ß√£o:** Identificador √∫nico do paciente
- **Uso:** Agrupar todas as consultas do mesmo paciente

### `entrada_data`
- **Tipo:** Date
- **Descri√ß√£o:** Data da consulta/epis√≥dio assistencial
- **Uso:** Ordena√ß√£o temporal das consultas

### `consulta_numero`
- **Tipo:** Integer
- **Descri√ß√£o:** N√∫mero sequencial da consulta para cada paciente (1, 2, 3...)
- **Uso:** Identificar primeira consulta, progress√£o temporal

### `profissional_especialidade`
- **Tipo:** String
- **Valores comuns:** 
  - "M√©dico cl√≠nico geral"
  - "Enfermeiro"
  - "M√©dico cardiologista"
  - "T√©cnico de enfermagem"
- **Uso:** Identificar tipo de atendimento

---

## **SE√á√ÉO 2: DIAGN√ìSTICO - MORBIDADES PRINCIPAIS**

### `DM`
- **Tipo:** Boolean
- **Valores:** TRUE/FALSE
- **Descri√ß√£o:** Paciente tem diagn√≥stico de Diabetes Mellitus
- **Crit√©rios:**
  - CID E10-E14, O24, ou complica√ß√µes (H360, G632, etc.)
  - OU HbA1c ‚â• 6.5%
  - OU Glicemia jejum ‚â• 126 mg/dL
  - OU uso de antidiab√©ticos (metformina, insulina, etc.)
- **Persist√™ncia:** Uma vez TRUE, permanece TRUE em todas consultas subsequentes

### `pre_DM`
- **Tipo:** Boolean
- **Valores:** TRUE/FALSE
- **Descri√ß√£o:** Paciente tem pr√©-diabetes (apenas se N√ÉO for diab√©tico)
- **Crit√©rios:**
  - Glicemia jejum entre 100-125 mg/dL
  - OU HbA1c entre 5.7-6.4%
- **Nota:** Se `DM = TRUE`, ent√£o `pre_DM = FALSE`

### `HAS`
- **Tipo:** Boolean
- **Valores:** TRUE/FALSE
- **Descri√ß√£o:** Hipertens√£o Arterial Sist√™mica
- **Crit√©rios:**
  - CID I10-I16, O10-O11
  - OU PA ‚â• 180/110 mmHg
  - OU uso de anti-hipertensivos

### `CI`
- **Tipo:** Boolean
- **Valores:** TRUE/FALSE
- **Descri√ß√£o:** Cardiopatia Isqu√™mica (angina, IAM, etc.)
- **Crit√©rios:** CID I20-I25

### `ICC`
- **Tipo:** Boolean
- **Valores:** TRUE/FALSE
- **Descri√ß√£o:** Insufici√™ncia Card√≠aca Congestiva
- **Crit√©rios:** CID I11.0, I13.0, I42.x, I43, I50, P29.0

### `IRC`
- **Tipo:** Boolean
- **Valores:** TRUE/FALSE
- **Descri√ß√£o:** Insufici√™ncia Renal Cr√¥nica
- **Crit√©rios:**
  - CID N18, N19, I12.0, I13.1, etc.
  - OU eGFR indica est√°gio G2-G5 (tabela MM_eGFR)

---

## **SE√á√ÉO 3: CONTROLE GLIC√äMICO - MEDI√á√ïES**

### `hemoglobina_glicada_ff`
- **Tipo:** Float
- **Unidade:** % (percentual)
- **Descri√ß√£o:** √öltimo valor de HbA1c medido (com forward-fill)
- **Interpreta√ß√£o:**
  - < 5.7%: Normal
  - 5.7-6.4%: Pr√©-diabetes
  - ‚â• 6.5%: Diabetes
  - < 7.0%: Controlado (meta padr√£o)
  - ‚â• 7.0%: Descontrolado
- **Forward-fill:** Repete o √∫ltimo valor medido at√© nova medi√ß√£o

### `hba1c_anterior`
- **Tipo:** Float
- **Unidade:** %
- **Descri√ß√£o:** Valor da **pen√∫ltima** medi√ß√£o REAL de HbA1c
- **Valores:** NULL se √© a primeira medi√ß√£o do paciente
- **Uso:** Comparar com HbA1c atual para calcular tend√™ncia

### `dias_desde_hba1c_anterior`
- **Tipo:** Integer
- **Unidade:** Dias
- **Descri√ß√£o:** N√∫mero de dias **entre** as duas √∫ltimas medi√ß√µes de HbA1c
- **Valores:** 
  - NULL: Paciente nunca teve HbA1c medida
  - NULL: √â a primeira medi√ß√£o do paciente
  - 0-730: Intervalo normal entre medi√ß√µes
- **Interpreta√ß√£o:**
  - < 90 dias: Intervalo curto (n√£o usar para tend√™ncia)
  - 90-180 dias: Intervalo ideal para monitoramento
  - 180-365 dias: Intervalo aceit√°vel
  - > 365 dias: Intervalo muito longo

### `variacao_hba1c`
- **Tipo:** Float
- **Unidade:** Pontos percentuais (pp)
- **Descri√ß√£o:** Diferen√ßa entre HbA1c atual e anterior (atual - anterior)
- **C√°lculo:** `hba1c - hba1c_anterior`
- **Interpreta√ß√£o:**
  - < -0.5 pp: Melhora significativa
  - -0.5 a +0.5 pp: Est√°vel
  - > +0.5 pp: Piora significativa
- **Exemplo:** 9.5% ‚Üí 7.8% = -1.7 pp (melhorou)

### `dias_desde_hba1c_medida`
- **Tipo:** Integer
- **Unidade:** Dias
- **Descri√ß√£o:** Dias desde a **√∫ltima medi√ß√£o real** de HbA1c at√© a consulta atual
- **Uso:** Identificar se HbA1c est√° "fresca" ou "antiga"
- **Interpreta√ß√£o:**
  - 0-90 dias: Medi√ß√£o recente
  - 91-180 dias: Medi√ß√£o ainda v√°lida
  - > 180 dias: Medi√ß√£o antiga (precisa renovar)

### `data_hba1c_anterior`
- **Tipo:** Date
- **Descri√ß√£o:** Data em que a pen√∫ltima HbA1c foi medida
- **Uso:** Contextualizar a compara√ß√£o temporal

---

## **SE√á√ÉO 4: METAS E STATUS DE CONTROLE**

### `meta_hba1c`
- **Tipo:** Float
- **Unidade:** %
- **Valores poss√≠veis:** 7.0, 7.5, 8.0
- **Descri√ß√£o:** Meta individualizada de HbA1c para o paciente
- **Crit√©rios de defini√ß√£o:**
  - **7.0%** (meta padr√£o): Pacientes jovens/saud√°veis
  - **7.5%**: Idade 60-75 anos OU complica√ß√µes moderadas
  - **8.0%**: Idade ‚â• 75 anos OU m√∫ltiplas complica√ß√µes/comorbidades graves
- **Complica√ß√µes consideradas:** ICC, IRC, CI, stroke, dem√™ncia

### `status_controle_glicemico`
- **Tipo:** String
- **Valores poss√≠veis:**
  - **"controlado"**: HbA1c ‚â§ meta individualizada
  - **"descontrolado"**: HbA1c > meta individualizada
  - **"sem_dados"**: N√£o h√° HbA1c medida
- **Exemplo:** Meta 7.5%, HbA1c 7.2% ‚Üí "controlado"

### `tendencia_hba1c`
- **Tipo:** String
- **Valores poss√≠veis:**

**Para pacientes COM diabetes (DM = TRUE):**
  - **"sem_dados"**: Nenhum exame de HbA1c realizado
  - **"sem_referencia_previa"**: Apenas 1 exame (n√£o h√° anterior para comparar)
  - **"melhorando"**: HbA1c caiu > 0.5 pp em rela√ß√£o √† anterior
  - **"piorando"**: HbA1c subiu > 0.5 pp em rela√ß√£o √† anterior
  - **"estavel"**: Varia√ß√£o entre -0.5 e +0.5 pp

**Para pacientes SEM diabetes (DM = FALSE) - Rastreamento:**
  - **"rastreio - normal"**: HbA1c < 5.7%
  - **"rastreio - pre_diabetes"**: HbA1c 5.7-6.4%
  - **"rastreio - provavel_diabetes"**: HbA1c ‚â• 6.5%

- **Interpreta√ß√£o cl√≠nica:**
  - "melhorando" ‚Üí Tratamento efetivo
  - "estavel" ‚Üí Manuten√ß√£o adequada
  - "piorando" ‚Üí Necessita ajuste terap√™utico

---

## **SE√á√ÉO 5: TRATAMENTO - MEDICAMENTOS PARA DIABETES**

### `nucleo_cronico_atual`
- **Tipo:** String (texto longo)
- **Descri√ß√£o:** Lista de TODOS os medicamentos cr√¥nicos prescritos
- **Formato:** Separados por " / "
- **Exemplo:** "Metformina 850mg / Losartana 50mg / Sinvastatina 20mg"
- **Uso:** Vis√£o geral do regime terap√™utico

### `medicamentos_cronicos_normalizados`
- **Tipo:** String
- **Descri√ß√£o:** Lista padronizada de medicamentos cr√¥nicos
- **Diferen√ßa do anterior:** Nomes normalizados, doses extra√≠veis
- **Uso:** An√°lise computacional de doses e classes

### `total_medicamentos_cronicos`
- **Tipo:** Integer
- **Descri√ß√£o:** N√∫mero total de medicamentos cr√¥nicos em uso
- **Valores:** 0-20+ (tipicamente 3-10)
- **Uso:** Identificar polifarm√°cia

### `tto_DM_tendencia`
- **Tipo:** String
- **Descri√ß√£o:** Esquema terap√™utico atual para diabetes
- **Valores poss√≠veis:**
  - **"Sem tratamento medicamentoso"**: N√£o usa antidiab√©ticos
  - **"Monoterapia oral"**: 1 classe oral (ex: s√≥ metformina)
  - **"Terapia dupla oral"**: 2 classes orais
  - **"Terapia tripla oral"**: 3 classes orais
  - **"Insulina isolada"**: S√≥ insulina
  - **"Insulina + oral"**: Combina√ß√£o
  - **"Terapia complexa"**: 4+ classes
- **Uso:** Avaliar intensidade do tratamento

### `qtd_classes_dm`
- **Tipo:** Integer
- **Valores:** 0-6
- **Descri√ß√£o:** N√∫mero de classes terap√™uticas de antidiab√©ticos em uso
- **Classes inclu√≠das:**
  1. Biguanidas (metformina)
  2. Sulfonilureias (gliclazida, glibenclamida)
  3. Insulinas
  4. SGLT2-i (dapagliflozina, empagliflozina)
  5. GLP-1 agonistas
  6. Inibidores DPP-4
- **Interpreta√ß√£o:**
  - 0: Tratamento n√£o medicamentoso
  - 1: Monoterapia
  - 2-3: Terapia combinada (adequado)
  - 4+: Terapia complexa (considerar revis√£o)

### `dose_diaria_metformina`
- **Tipo:** Float
- **Unidade:** mg/dia
- **Valores:** 0-3000 mg (tipicamente 500-2500 mg)
- **Descri√ß√£o:** Dose total di√°ria de metformina
- **Refer√™ncia:**
  - 500-1000 mg/dia: Dose baixa
  - 1500-2000 mg/dia: Dose padr√£o
  - 2000-2550 mg/dia: Dose m√°xima

### `dose_diaria_insulina_ui`
- **Tipo:** Float
- **Unidade:** UI/dia (Unidades Internacionais)
- **Valores:** 0-200 UI/dia (tipicamente 10-100 UI)
- **Descri√ß√£o:** Dose total di√°ria de insulina (todas as insulinas somadas)
- **Refer√™ncia:**
  - < 30 UI/dia: Dose baixa
  - 30-60 UI/dia: Dose moderada
  - > 60 UI/dia: Dose alta

---

## **SE√á√ÉO 6: POLIFARM√ÅCIA**

### `polifarmacia`
- **Tipo:** Boolean
- **Valores:** TRUE/FALSE
- **Defini√ß√£o:** Paciente usa **5 ou mais** medicamentos cr√¥nicos simultaneamente
- **Implica√ß√£o:** Aumento do risco de:
  - Intera√ß√µes medicamentosas
  - Efeitos adversos
  - Baixa ades√£o
  - Erros de administra√ß√£o

### `hiperpolifarmacia`
- **Tipo:** Boolean
- **Valores:** TRUE/FALSE
- **Defini√ß√£o:** Paciente usa **10 ou mais** medicamentos cr√¥nicos simultaneamente
- **Implica√ß√£o:** Risco ainda maior que polifarm√°cia simples

---

## **SE√á√ÉO 7: MUDAN√áAS DE TRATAMENTO**

### `houve_mudanca_prescricao_nesta_consulta`
- **Tipo:** Integer
- **Valores:** 0 ou 1
- **Descri√ß√£o:** Indica se houve mudan√ßa no n√∫cleo cr√¥nico NESTA consulta
- **Crit√©rio:** Compara√ß√£o com o n√∫cleo da consulta anterior
- **Mudan√ßas consideradas:**
  - Adi√ß√£o de medicamento
  - Remo√ß√£o de medicamento
  - Troca de medicamento
  - Mudan√ßa de dose

### `dias_desde_mudanca_prescricao_real`
- **Tipo:** Integer
- **Unidade:** Dias
- **Descri√ß√£o:** Dias desde a √∫ltima mudan√ßa REAL detectada no tratamento
- **Valores:**
  - 0: Houve mudan√ßa nesta consulta
  - NULL: Nunca houve mudan√ßa
  - 1-730: Dias desde √∫ltima mudan√ßa
- **Uso:** Avaliar in√©rcia terap√™utica

### `nucleo_anterior`
- **Tipo:** String
- **Descri√ß√£o:** N√∫cleo cr√¥nico da consulta **imediatamente anterior**
- **Uso:** Comparar com `nucleo_cronico_atual` para identificar mudan√ßas

### `qtd_classes_anterior`
- **Tipo:** Integer
- **Descri√ß√£o:** N√∫mero de classes de antidiab√©ticos na consulta anterior
- **Uso:** Identificar se houve intensifica√ß√£o/simplifica√ß√£o do tratamento DM

### `dose_metformina_anterior`
- **Tipo:** Float
- **Unidade:** mg/dia
- **Descri√ß√£o:** Dose de metformina na consulta anterior
- **Uso:** Identificar ajustes de dose

### `dose_insulina_anterior`
- **Tipo:** Float
- **Unidade:** UI/dia
- **Descri√ß√£o:** Dose de insulina na consulta anterior
- **Uso:** Identificar ajustes de dose (titula√ß√£o)

---

## **SE√á√ÉO 8: LACUNAS DE CUIDADO - DIABETES**

### `lacuna_DM_sem_CID`
- **Tipo:** Boolean
- **Valores:** TRUE/FALSE
- **Descri√ß√£o:** **Lacuna 1.2** - Paciente tem diabetes mas nunca teve CID documentado
- **Crit√©rio:**
  - `DM = TRUE` (por exames/medicamentos)
  - E nunca teve CID E10-E14 registrado
- **Import√¢ncia:** Afeta codifica√ß√£o, estat√≠sticas, repasse de recursos

### `lacuna_DM_sem_HbA1c_recente`
- **Tipo:** Boolean
- **Valores:** TRUE/FALSE
- **Descri√ß√£o:** **Lacuna 6.1** - Paciente diab√©tico sem HbA1c nos √∫ltimos 180 dias
- **Crit√©rio:**
  - `DM = TRUE`
  - E `dias_desde_hba1c_medida > 180` OU `dias_desde_hba1c_medida IS NULL`
- **Protocolo recomendado:** HbA1c a cada 3-6 meses

### `lacuna_DM_descontrolado`
- **Tipo:** Boolean
- **Valores:** TRUE/FALSE
- **Descri√ß√£o:** **Lacuna 6.2** - Diabetes descontrolado (HbA1c acima da meta)
- **Crit√©rio:**
  - `status_controle_glicemico = 'descontrolado'`
  - HbA1c > meta individualizada
- **A√ß√£o recomendada:** Ajuste terap√™utico

### `lacuna_DM_inercia_terapeutica`
- **Tipo:** Boolean
- **Valores:** TRUE/FALSE
- **Descri√ß√£o:** **Lacuna 6.3** - Diabetes descontrolado SEM ajuste h√° ‚â• 180 dias
- **Crit√©rio:**
  - HbA1c > meta
  - E `dias_desde_mudanca_prescricao_real ‚â• 180` OU nunca houve mudan√ßa
- **Defini√ß√£o de in√©rcia:** Falha em intensificar tratamento quando indicado
- **Exce√ß√µes consideradas:**
  - Ajuste recente (< 180 dias)
  - Contraindica√ß√µes

### `lacuna_DM_piorando_sem_ajuste`
- **Tipo:** Boolean
- **Valores:** TRUE/FALSE
- **Descri√ß√£o:** **Lacuna 6.4** - HbA1c piorando sem resposta terap√™utica
- **Crit√©rio:**
  - `tendencia_hba1c = 'piorando'`
  - E `dias_desde_mudanca_prescricao_real ‚â• 90` OU nunca houve mudan√ßa
- **Import√¢ncia:** Indica perda de oportunidade de interven√ß√£o precoce

### `DM_ajuste_ativo`
- **Tipo:** Boolean
- **Valores:** TRUE/FALSE
- **Descri√ß√£o:** **Flag positivo** - Houve ajuste terap√™utico nos √∫ltimos 180 dias
- **Crit√©rio:**
  - `dias_desde_mudanca_prescricao_real < 180`
- **Uso:** Identificar manejo ativo (contraponto √†s lacunas)

---

## **SE√á√ÉO 9: TOTALIZADORES DO PACIENTE**

### `total_consultas_paciente`
- **Tipo:** Integer
- **Descri√ß√£o:** Total de consultas do paciente em TODO o per√≠odo
- **Uso:** Avaliar engajamento no cuidado

### `total_medicas_paciente`
- **Tipo:** Integer
- **Descri√ß√£o:** Total de consultas M√âDICAS do paciente
- **Uso:** Avaliar acesso √† consulta m√©dica

### `total_hba1c_paciente`
- **Tipo:** Integer
- **Descri√ß√£o:** Total de medi√ß√µes de HbA1c do paciente
- **Uso:** Avaliar adequa√ß√£o do monitoramento

### `consultas_validadas`
- **Tipo:** Integer
- **Descri√ß√£o:** Total de consultas do paciente (redundante com `total_consultas_paciente`)
- **Origem:** CTE `pacientes_filtrados_final`

### `medicoes_hba1c_validadas`
- **Tipo:** Integer
- **Descri√ß√£o:** N√∫mero de valores DISTINTOS de HbA1c (aproximado)
- **Uso:** Confirmar crit√©rio de inclus√£o (‚â• 3 medi√ß√µes)

---

## **üìä CASOS DE USO - EXEMPLOS DE AN√ÅLISE**

### **Exemplo 1: Identificar pacientes com in√©rcia terap√™utica grave**
```sql
WHERE lacuna_DM_inercia_terapeutica = TRUE
  AND dias_desde_mudanca_prescricao_real > 365
  AND hba1c > 9.0
```

### **Exemplo 2: Monitorar resposta ao ajuste terap√™utico**
```sql
WHERE DM_ajuste_ativo = TRUE
  AND tendencia_hba1c = 'melhorando'
```

### **Exemplo 3: Pacientes em risco de descompensa√ß√£o**
```sql
WHERE tendencia_hba1c = 'piorando'
  AND status_controle_glicemico = 'descontrolado'
  AND lacuna_DM_piorando_sem_ajuste = TRUE
```

### **Exemplo 4: Avaliar intensidade do tratamento vs controle**
```sql
SELECT 
  qtd_classes_dm,
  AVG(hba1c) as hba1c_media,
  SUM(CASE WHEN status_controle_glicemico = 'controlado' THEN 1 ELSE 0 END) / COUNT(*) as taxa_controle
GROUP BY qtd_classes_dm
```

---

## **‚ö†Ô∏è NOTAS IMPORTANTES**

1. **Forward-fill:** Valores de HbA1c se repetem entre consultas at√© nova medi√ß√£o
2. **Persist√™ncia de diagn√≥sticos:** DM, HAS, CI, ICC etc. uma vez TRUE, permanecem TRUE
3. **Lacunas s√£o cumulativas:** Um paciente pode ter m√∫ltiplas lacunas simultaneamente
4. **Interpreta√ß√£o contextualizada:** Sempre considerar idade, comorbidades e meta individualizada

---
